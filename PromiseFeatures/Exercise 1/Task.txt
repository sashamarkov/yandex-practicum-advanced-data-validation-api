–î–∏—Å–∫–ª–µ–π–º–µ—Ä: –Ω–µ–∫–æ—Ç–æ—Ä—ã–µ —Ç—Ä–µ–Ω–∞–∂—ë—Ä—ã –≤ —ç—Ç–æ–º —Å–ø—Ä–∏–Ω—Ç–µ –º–æ–≥—É—Ç –ø–æ–∫–∞–∑–∞—Ç—å—Å—è –≤–∞–º —Å–ª–∏—à–∫–æ–º –±–æ–ª—å—à–∏–º–∏. –¢–∞–∫ –∏ –µ—Å—Ç—å: –≤—ã –æ—Å—Ç–∞–≤–∏–ª–∏ –ø–æ–∑–∞–¥–∏ 6 —Å–ø—Ä–∏–Ω—Ç–æ–≤, –∞ –∑–Ω–∞—á–∏—Ç, –≥–æ—Ç–æ–≤—ã —Ä–µ—à–∞—Ç—å –µ—â—ë –±–æ–ª–µ–µ —Å–ª–æ–∂–Ω—ã–µ –∑–∞–¥–∞—á–∏. C–æ–∑–¥–∞—Ç–µ–ª–∏ –∫—É—Ä—Å–∞ —Å—Ç–∞—Ä–∞–ª–∏—Å—å —É—á–µ—Å—Ç—å –≤–∞—à –æ–±—Ä–∞–∑–æ–≤–∞—Ç–µ–ª—å–Ω—ã–π –æ–ø—ã—Ç –∏ ¬´–Ω–µ –ø–µ—Ä–µ–≥–Ω—É—Ç—å –ø–∞–ª–∫—É¬ª, –Ω–æ –≤—Å—ë –∂–µ –ø–µ—Ä–µ–¥ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ–º –∑–∞–¥–∞–Ω–∏–π —Å–æ–≤–µ—Ç—É–µ–º –∑–∞–≤–∞—Ä–∏—Ç—å —á–∞—é –∏ –Ω–µ–º–Ω–æ–≥–æ –ø–µ—Ä–µ–¥–æ—Ö–Ω—É—Ç—å.
–í–∞–º –Ω—É–∂–Ω–æ –¥–æ–ø–æ–ª–Ω–∏—Ç—å –∏–≥—Ä—É "–ì–æ–Ω–∫–∏ –ø—Ä–æ–º–∏—Å–æ–≤" –≤—ã–≤–æ–¥–æ–º –ø—Ä–∏–∑–æ–≤—ã—Ö –º–µ—Å—Ç. –°–µ–π—á–∞—Å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –∑–∞–≤–µ—Ä—à–µ–Ω–∏–∏ –≥–æ–Ω–∫–∏ —É—á–∞—Å—Ç–Ω–∏–∫–æ–º –≤—ã–≤–æ–¥–∏—Ç—Å—è –≤ –∫–æ–Ω—Å–æ–ª—å –∏ –Ω–µ–ø–æ–Ω—è—Ç–Ω–æ, –∫–æ–≥–¥–∞ –∂–µ –ø–æ–∑–¥—Ä–∞–≤–ª—è—Ç—å –ø–æ–±–µ–¥–∏—Ç–µ–ª–µ–π. –°–æ–±–µ—Ä–∏—Ç–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –∑–∞–±–µ–≥–µ –∫–∞–∂–¥–æ–≥–æ —É—á–∞—Å—Ç–Ω–∏–∫–∞ –≤ –ø—Ä–æ–º–∏—Å –∏ –¥–æ–∂–¥–∏—Ç–µ—Å—å –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è –≤—Å–µ—Ö –ø—Ä–æ–º–∏—Å–æ–≤ —Å –ø–æ–º–æ—â—å—é Promise.all, –∑–∞—Ç–µ–º –≤—Ä—É—á–∏—Ç–µ –∫–∞–∂–¥–æ–º—É –ø–æ–±–µ–¥–∏—Ç–µ–ª—é –º–µ–¥–∞–ª—å.

---
–ö–∞–∂–¥—ã–π –∑–∞–±–µ–≥ –≤ —Ñ—É–Ω–∫—Ü–∏–∏ startRunning –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –ø—Ä–æ–º–∏—Å
–î–ª—è –≤—ã–∑–æ–≤–∞ Promise.all –ø—Ä–∏–≥–æ–¥–∏—Ç—Å—è —Å–ø–∏—Å–æ–∫ –ø—Ä–æ–º–∏—Å–æ–≤

---
index.js

const maxSteps = 102;

function startRunning(elem, speed){
    return new Promise((resolve, reject) => {
        let startTime = Date.now();

        let doStep = (step) => {
            if(step <= maxSteps){
                if(step == Math.round(maxSteps / 2)){ //–≤—Ç–æ—Ä–æ–µ –¥—ã—Ö–∞–Ω–∏–µ
                    speed = Math.max(0.1, Math.min(1.0, speed + (Math.random() - 0.5)))
                }
                setTimeout(() => doStep(step + 1), speed * 500)
            } else {
                let endTime = Date.now();
                resolve(endTime - startTime);
            }
            elem.textContent = " " + elem.textContent;
        }

        doStep(0)
    })
}

document.addEventListener('DOMContentLoaded', () => {
    
    let runItems = ...

    document.querySelectorAll(".line").forEach(lineElem => {
        let lineSpeed = Math.max(0.1, Math.random());
        let runPromise = startRunning(lineElem, lineSpeed)
            .then(deltaTime => {
                lineElem.textContent += ` —É—Å–ø–µ–ª –∑–∞ ${deltaTime / 1000} —Å–µ–∫.`
                return {lineElem, deltaTime}
            });
        ...(runPromise);
    })

    ...then(runs => {
        let sortedRuns = runs.toSorted((a, b) => a.deltaTime - b.deltaTime);
        sortedRuns[0].lineElem.textContent += " ü•á –ü–µ—Ä–≤–æ–µ –º–µ—Å—Ç–æ!"
        sortedRuns[1].lineElem.textContent += " ü•à –í—Ç–æ—Ä–æ–µ –º–µ—Å—Ç–æ!"
        sortedRuns[2].lineElem.textContent += " ü•â –¢—Ä–µ—Ç—å–µ –º–µ—Å—Ç–æ!"
    })
})