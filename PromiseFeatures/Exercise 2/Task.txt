Ð’Ñ‹ Ñ€Ð°Ð·Ñ€Ð°Ð±Ð°Ñ‚Ñ‹Ð²Ð°ÐµÑ‚Ðµ Ð³ÐµÐ½ÐµÑ€Ð°Ñ‚Ð¾Ñ€ ÑÐµÐºÑ€ÐµÑ‚Ð½Ñ‹Ñ… ÐºÐ¾Ð´Ð¾Ð² Ð´Ð»Ñ ÑˆÐ¸Ñ„Ñ€Ð¾Ð²Ð°Ð½Ð¸Ñ Ð´Ð¾ÐºÑƒÐ¼ÐµÐ½Ñ‚Ð¾Ð². Ð”Ð»Ñ ÑÑ‚Ð¾Ð³Ð¾ Ð²Ñ‹ Ð·Ð°Ð¿Ð¾Ð»Ð½ÑÐµÑ‚Ðµ Ð¼Ð°Ñ‚Ñ€Ð¸Ñ†Ñƒ Ð¿Ñ€Ð¾Ð¸Ð·Ð²Ð¾Ð»ÑŒÐ½Ñ‹Ð¼Ð¸ ÑÐ¸Ð¼Ð²Ð¾Ð»Ð°Ð¼Ð¸ Ð¾Ñ‚ 0 Ð´Ð¾ 9 Ð¸ Ð¾Ñ‚ A Ð´Ð¾ Z. ÐšÐ¾Ð´Ñ‹ Ð¸Ð¼ÐµÑŽÑ‚ Ð³ÐµÐ¾Ð¼ÐµÑ‚Ñ€Ð¸Ñ‡ÐµÑÐºÐ¸Ð¹ ÑÐ¼Ñ‹ÑÐ», Ð¿Ð¾ÑÑ‚Ð¾Ð¼Ñƒ Ð³ÐµÐ½ÐµÑ€Ð°Ñ‚Ð¾Ñ€ Ð½Ðµ Ð²ÑÐµÐ³Ð´Ð° ÑƒÐ³Ð°Ð´Ñ‹Ð²Ð°ÐµÑ‚ ÑÐ»ÐµÐ´ÑƒÑŽÑ‰Ð¸Ð¹ ÑÐ¸Ð¼Ð²Ð¾Ð».
Ð’Ð°ÑˆÐ° Ð·Ð°Ð´Ð°Ñ‡Ð° Ð·Ð°Ð¿ÑƒÑÑ‚Ð¸Ñ‚ÑŒ Ð³ÐµÐ½ÐµÑ€Ð°Ñ†Ð¸ÑŽ Ð² Ð²Ð¸Ð´Ðµ Ð¼Ð°ÑÑÐ¸Ð²Ð° Ð¿Ñ€Ð¾Ð¼Ð¸ÑÐ¾Ð² Ð¸ Ð·Ð°Ñ‚ÐµÐ¼ Ð¿Ñ€Ð¾Ð°Ð½Ð°Ð»Ð¸Ð·Ð¸Ñ€Ð¾Ð²Ð°Ñ‚ÑŒ Ð²ÑÐµ ÑƒÑÐ¿ÐµÑˆÐ½Ð¾ Ð·Ð°Ð²ÐµÑ€ÑˆÑ‘Ð½Ð½Ñ‹Ðµ Ð¿Ñ€Ð¾Ð¼Ð¸ÑÑ‹ Ñ Ð¿Ð¾Ð¼Ð¾Ñ‰ÑŒÑŽ Ñ„ÑƒÐ½ÐºÑ†Ð¸Ð¸ Promise.allSettled(). Ð¤ÑƒÐ½ÐºÑ†Ð¸ÑŽ Ð³ÐµÐ½ÐµÑ€Ð°Ñ‚Ð¾Ñ€Ð° Ð¿Ð¸ÑÐ°Ñ‚ÑŒ Ð½Ðµ Ñ‚Ñ€ÐµÐ±ÑƒÐµÑ‚ÑÑ, Ð¸ÑÐ¿Ð¾Ð»ÑŒÐ·ÑƒÐ¹Ñ‚Ðµ Ð¿Ñ€Ð¾Ð¼Ð¸Ñ, ÐºÐ¾Ñ‚Ð¾Ñ€Ñ‹Ð¹ Ð¾Ð½Ð° Ð²Ð¾Ð·Ð²Ñ€Ð°Ñ‰Ð°ÐµÑ‚.
Ð’Ñ‹Ð²ÐµÐ´Ð¸Ñ‚Ðµ Ð² ÐºÐ¾Ð½ÑÐ¾Ð»ÑŒ ÑÐµÐºÑ€ÐµÑ‚Ð½Ñ‹Ð¹ ÐºÐ¾Ð´ Ð¸ ÐºÐ¾Ð»Ð¸Ñ‡ÐµÑÑ‚Ð²Ð¾ ÑƒÐ´Ð°Ñ‡Ð½Ñ‹Ñ… Ð¸ Ð½ÐµÑƒÐ´Ð°Ñ‡Ð½Ñ‹Ñ… Ð¿Ð¾Ð¿Ñ‹Ñ‚Ð¾Ðº.

---
Ð’Ñ‹Ð·Ñ‹Ð²Ð°Ð¹Ñ‚Ðµ Ñ„ÑƒÐ½ÐºÑ†Ð¸ÑŽ Ð³ÐµÐ½ÐµÑ€Ð°Ñ‚Ð¾Ñ€Ð° Ð½ÐµÑÐºÐ¾Ð»ÑŒÐºÐ¾ Ñ€Ð°Ð· Ð² Ñ†Ð¸ÐºÐ»Ðµ, Ð½Ðµ Ð·Ð°Ð±ÑƒÐ´ÑŒÑ‚Ðµ ÑÐ¾Ñ…Ñ€Ð°Ð½Ð¸Ñ‚ÑŒ Ð¿Ñ€Ð¾Ð¼Ð¸Ñ
Ð¤ÑƒÐ½ÐºÑ†Ð¸Ñ Promise.allSettled() Ð¿Ñ€Ð¸Ð½Ð¸Ð¼Ð°ÐµÑ‚ Ð¸Ð¼ÐµÐ½Ð½Ð¾ Ð¼Ð°ÑÑÐ¸Ð² Ð¿Ñ€Ð¾Ð¼Ð¸ÑÐ¾Ð²
ÐŸÑ€Ð¾Ð°Ð½Ð°Ð»Ð¸Ð·Ð¸Ñ€ÑƒÐ¹Ñ‚Ðµ Ñ€ÐµÐ·ÑƒÐ»ÑŒÑ‚Ð°Ñ‚ Ð² .then, Ð¿Ð¾Ð¼Ð½Ð¸Ñ‚Ðµ Ð¿Ñ€Ð¾ ÑÐ¿ÐµÑ†Ð¸Ð°Ð»ÑŒÐ½Ñ‹Ð¹ Ñ„Ð¾Ñ€Ð¼Ð°Ñ‚ Ñ€ÐµÐ·ÑƒÐ»ÑŒÑ‚Ð°Ñ‚Ð¾Ð² Ð¸ Ð¿Ð¾Ð»Ðµ .status

---
index.js
let field = [
    [' ', ' ', ' ', ' ', ' ', ],
    [' ', ' ', ' ', ' ', ' ', ],
    [' ', ' ', ' ', ' ', ' ', ],
    [' ', ' ', ' ', ' ', ' ', ],
    [' ', ' ', ' ', ' ', ' ', ],
];

let lines = document.querySelectorAll(".line")

function drawField() {
    lines.forEach((line, index) => {
        let row = field[index]
        line.textContent = row.join("\t")
    })
    requestAnimationFrame(() => drawField())
}

let chars = ['0ï¸âƒ£','1ï¸âƒ£','2ï¸âƒ£','3ï¸âƒ£','4ï¸âƒ£','5ï¸âƒ£','6ï¸âƒ£','7ï¸âƒ£','8ï¸âƒ£','9ï¸âƒ£','ðŸ…°','ðŸ…±','ðŸ…²','ðŸ…³','ðŸ…´','ðŸ…µ',
    'ðŸ…¶','ðŸ…·','ðŸ…¸','ðŸ…¹','ðŸ…º','ðŸ…»','ðŸ…¼','ðŸ…½','ðŸ…¾','ðŸ…¿','ðŸ†€','ðŸ†','ðŸ†‚','ðŸ†ƒ','ðŸ†„','ðŸ†…','ðŸ††','ðŸ†‡','ðŸ†ˆ','ðŸ†‰']

function putRandomDot(){
    return new Promise((resolve, reject) => {
        let rowIdx = Math.round((field.length - 1) * Math.random());
        let colIdx = Math.round((field[rowIdx].length - 1) * Math.random());
        let charIdx = Math.round((chars.length - 1) * Math.random())
        setTimeout(() => {
            let oldChar = field[rowIdx][colIdx]
            let newChar = chars[charIdx];
            if(oldChar == " "){
                field[rowIdx][colIdx] = newChar
                resolve({newChar, rowIdx, colIdx})
            } else if (oldChar == newChar) {
                resolve({newChar, rowIdx, colIdx})
            } else {
                reject({err: `${rowIdx}:${colIdx} already taken`})
            }
        }, Math.random() * 5000)
    })
}

document.addEventListener("DOMContentLoaded", () => {
    let dotPromises = ...
    for(let i = 0; i < 128; i++){
        putRandomDot() ???
    }
    ...then(dotResult => {
        let dotRejected = dotResult.filter(dot => ???)
        let dotResolved = dotResult.filter(dot => ???).map(dot => dot.value.newChar)

        console.log(`resolved ???, rejected ???`)
        console.log(`secret code: ${dotResolved.join('')}`)
    })
    
    drawField();
})